<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      /* 레이아웃 */
      .wrap {
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 24px;
        align-items: start;
      }
      .summary {
        position: sticky;
        top: 20px;
        border: 1px solid #eee;
        border-radius: 12px;
        padding: 16px;
        background: #fff;
      }
      .summary[hidden] {
        display: none;
      }
      .content .step {
        padding: 40px 0;
        border-bottom: 1px solid #f0f0f0;
      }
      .date-selected {
        display: flex;
        flex-wrap: wrap;
        margin: 20px;
        background-color: aquamarine;
        padding: 30px 100px;
      }
      /* 클릭 영역 */
      .calendar .date,
      .slot-list .slot,
      .to-next,
      .to-pay,
      .pay {
        padding: 10px 14px;
        border: 1px solid #ddd;
        border-radius: 10px;
        background: #fff;
        cursor: pointer;
      }
      .calendar .date.is-selected,
      .slot-list .slot.is-selected {
        border-color: #111;
        background: #f6f6f6;
      }

      /* 헤더가 있을 때 앵커 스크롤 보정 */
      .step {
        scroll-margin-top: 90px;
      } /* 헤더 높이만큼 조정 */

      /* 모바일: 요약을 상단 고정바처럼 */
      @media (max-width: 960px) {
        .wrap {
          grid-template-columns: 1fr;
        }
        .summary {
          position: sticky;
          top: 0;
          z-index: 20;
          border-radius: 0;
          border-left: 0;
          border-right: 0;
        }
      }

      .maintop {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #ccc;
      }
      .infor {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .infor-txt {
        display: flex;
        gap: 40px;
      }
    </style>
  </head>
  <body>
    <header class="page-head">…로고/네비…</header>
    <section id="maintop">
      <div class="infor">
        <p>
          <img
            src="https://design.co.kr/wp-content/uploads/2024/03/%ED%8C%8C%EB%AC%98_%EC%BA%90%EB%A6%AD%ED%84%B0-%ED%8F%AC%EC%8A%A4%ED%84%B0_%EA%B9%80%EA%B3%A0%EC%9D%80_%EC%A0%84%EB%8B%AC%EC%9A%A9-832x1189.jpg"
            alt=""
          />
        </p>
        <div class="infor-title">
          <span>[대전시립미술관 본관]</span>
          <p>대충 작가와의 대화로 바라보는 전시 및 전위예술</p>
        </div>
        <div class="infor-txt">
          <div class="infor-main">
            <p>전시기간</p>
            <p>관람시간</p>
            <p>관람료</p>
            <p>전시실</p>
          </div>
          <div class="infor-detail">
            <p>2025-08-24 - 2025-08-26</p>
            <p>
              화수목금토일 10:00-18:00 매 월 마지막 주 수요일은 문화의 날로
              10:00-20:00 까지 가능
            </p>
            <p>관람료 2,000원</p>
            <p>전시실: 본관 3 전시실 4 전시실</p>
          </div>
        </div>
      </div>
      <div class="date">
        <div class="top-date"></div>
        <div class="bottom-date"></div>
      </div>
    </section>
    <main id="reserve" class="wrap">
      <!-- 2. 요약(처음엔 숨김 → 선택되면 sticky) -->
      <aside id="summary" class="summary" aria-live="polite" hidden>
        <h3>예약 요약</h3>
        <dl>
          <dt>전시</dt>
          <dd id="s-exhibit">—</dd>
          <dt>날짜</dt>
          <dd id="s-date">—</dd>
          <dt>회차</dt>
          <dd id="s-slot">—</dd>
          <dt>인원</dt>
          <dd id="s-qty">—</dd>
          <dt>금액</dt>
          <dd id="s-price">—</dd>
        </dl>
        <button class="to-pay" data-goto="#step5">결제 단계로</button>
      </aside>

      <section class="content">
        <section id="step1" class="step">
          <h2>1. 시간 선택</h2>
          <div class="calendar" role="grid">
            <button class="date-selected" data-date="2025-11-28">10:00</button>
            <button class="date-selected" data-date="2025-11-28">11:00</button>
            <button class="date-selected" data-date="2025-11-28">12:00</button>
            <button class="date-selected" data-date="2025-11-28">13:00</button>
            <button class="date-selected" data-date="2025-11-28">14:00</button>
            <button class="date-selected" data-date="2025-11-28">15:00</button>
            <button class="date-selected" data-date="2025-11-28">16:00</button>
            <button class="date-selected" data-date="2025-11-28">17:00</button>
            <button class="date-selected" data-date="2025-11-28">17:00</button>

            <!-- … -->
          </div>
        </section>

        <!-- 3. 전시/회차 선택 -->
        <section id="step3" class="step">
          <h2>인원 선택</h2>
          <ul class="slot-list">
            <li>
              <button class="slot" data-slot="10:00" data-price="12000">
                10:00
              </button>
            </li>
            <li>
              <button class="slot" data-slot="13:00" data-price="12000">
                13:00
              </button>
            </li>
            <li>
              <button class="slot" data-slot="16:00" data-price="15000">
                16:00
              </button>
            </li>
          </ul>
        </section>

        <!-- 4. 인원 선택 -->
        <section id="step4" class="step">
          <h2>3. 인원 선택</h2>
          <div class="qty"></div>
          <button class="to-next" data-goto="#step5">다음(결제 안내)</button>
        </section>

        <!-- 5. 결제/안내 -->
        <section id="step5" class="step">
          <h2>4. 결제 및 안내</h2>
          <p>취소/환불 규정 …</p>
          <button class="pay">결제하기</button>
        </section>
      </section>
    </main>
    <script>
      // 전역 상태
      const state = {
        exhibit: "MNCA 기획전", // 필요하면 1번 영역에서 셋업
        date: null,
        slot: null,
        qty: { adult: 1, teen: 0, child: 0 },
        unit: { adult: 12000, teen: 9000, child: 6000 },
        basePrice: 0,
      };

      // 요약 DOM
      const $summary = document.getElementById("summary");
      const $sExhibit = document.getElementById("s-exhibit");
      const $sDate = document.getElementById("s-date");
      const $sSlot = document.getElementById("s-slot");
      const $sQty = document.getElementById("s-qty");
      const $sPrice = document.getElementById("s-price");

      function currency(n) {
        return n.toLocaleString("ko-KR") + "원";
      }

      function calcPrice() {
        const ticket =
          state.qty.adult * state.unit.adult +
          state.qty.teen * state.unit.teen +
          state.qty.child * state.unit.child;
        return ticket; // 필요시 state.basePrice 더하기
      }

      function updateSummary() {
        $sExhibit.textContent = state.exhibit ?? "—";
        $sDate.textContent = state.date ?? "—";
        $sSlot.textContent = state.slot ?? "—";
        $sQty.textContent = `성인 ${state.qty.adult}, 청소년 ${state.qty.teen}, 어린이 ${state.qty.child}`;
        $sPrice.textContent = currency(calcPrice());

        // 처음 선택이 생기면 요약 보이기
        if (!$summary.hidden) return;
        if (state.date) $summary.hidden = false;
      }

      // 유틸: 부드러운 이동
      function goTo(sel) {
        const el = document.querySelector(sel);
        if (el) {
          el.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      }

      // 1) 날짜 선택
      document.querySelectorAll(".calendar .date").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".calendar .date")
            .forEach((b) => b.classList.remove("is-selected"));
          btn.classList.add("is-selected");
          state.date = btn.dataset.date;
          updateSummary();
          // 다음 단계로 자동 스크롤
          goTo("#step3");
        });
      });

      // 3) 회차 선택
      document.querySelectorAll(".slot-list .slot").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".slot-list .slot")
            .forEach((b) => b.classList.remove("is-selected"));
          btn.classList.add("is-selected");
          state.slot = btn.dataset.slot;
          state.basePrice = Number(btn.dataset.price || 0);
          updateSummary();
          goTo("#step4");
        });
      });

      // 4) 인원 선택
      document.querySelectorAll(".qty-input").forEach((input) => {
        input.addEventListener("input", () => {
          const type = input.dataset.type;
          state.qty[type] = Math.max(0, Number(input.value || 0));
          updateSummary();
        });
      });

      // 이동 버튼들(다음/결제)
      document.addEventListener("click", (e) => {
        const target = e.target.closest("[data-goto]");
        if (!target) return;
        e.preventDefault();
        goTo(target.dataset.goto);
      });

      // 초기 표시
      updateSummary();
    </script>
  </body>
</html>
